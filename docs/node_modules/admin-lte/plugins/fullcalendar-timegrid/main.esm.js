/*! For license information please see main.esm.js.LICENSE.txt */
import{createFormatter,removeElement,computeEventDraggable,computeEventStartResizable,computeEventEndResizable,cssToStr,isMultiDayRange,htmlEscape,compareByFieldSpecs,applyStyle,FgEventRenderer,buildSegCompareObj,FillRenderer,memoize,memoizeRendering,createDuration,wholeDivideDurations,findElements,PositionCache,startOfDay,asRoughMs,formatIsoTimeString,addDurations,htmlToElement,createElement,multiplyDuration,DateComponent,hasBgRendering,Splitter,diffDays,buildGotoAnchorHtml,getAllDayHtml,ScrollComponent,matchCellWidths,uncompensateScroll,compensateScroll,subtractInnerElHeight,View,intersectRanges,Slicer,DayHeader,DaySeries,DayTable,createPlugin}from"@fullcalendar/core";import{DayBgRow,DayGrid,SimpleDayGrid}from"@fullcalendar/daygrid";var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function __extends(e,t){function r(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},TimeGridEventRenderer=function(e){function t(t){var r=e.call(this)||this;return r.timeGrid=t,r}return __extends(t,e),t.prototype.renderSegs=function(t,r,i){e.prototype.renderSegs.call(this,t,r,i),this.fullTimeFormat=createFormatter({hour:"numeric",minute:"2-digit",separator:this.context.options.defaultRangeSeparator})},t.prototype.attachSegs=function(e,t){for(var r=this.timeGrid.groupSegsByCol(e),i=0;i<r.length;i++)r[i]=this.sortEventSegs(r[i]);this.segsByCol=r,this.timeGrid.attachSegsByCol(r,this.timeGrid.fgContainerEls)},t.prototype.detachSegs=function(e){e.forEach((function(e){removeElement(e.el)})),this.segsByCol=null},t.prototype.computeSegSizes=function(e){var t=this.timeGrid,r=this.segsByCol,i=t.colCnt;if(t.computeSegVerticals(e),r)for(var n=0;n<i;n++)this.computeSegHorizontals(r[n])},t.prototype.assignSegSizes=function(e){var t=this.timeGrid,r=this.segsByCol,i=t.colCnt;if(t.assignSegVerticals(e),r)for(var n=0;n<i;n++)this.assignSegCss(r[n])},t.prototype.computeEventTimeFormat=function(){return{hour:"numeric",minute:"2-digit",meridiem:!1}},t.prototype.computeDisplayEventEnd=function(){return!0},t.prototype.renderSegHtml=function(e,t){var r,i,n,o=e.eventRange,s=o.def,l=o.ui,a=s.allDay,d=computeEventDraggable(this.context,s,l),c=e.isStart&&computeEventStartResizable(this.context,s,l),h=e.isEnd&&computeEventEndResizable(this.context,s,l),u=this.getSegClasses(e,d,c||h,t),p=cssToStr(this.getSkinCss(l));if(u.unshift("fc-time-grid-event"),isMultiDayRange(o.range)){if(e.isStart||e.isEnd){var m=e.start,g=e.end;r=this._getTimeText(m,g,a),i=this._getTimeText(m,g,a,this.fullTimeFormat),n=this._getTimeText(m,g,a,null,!1)}}else r=this.getTimeText(o),i=this.getTimeText(o,this.fullTimeFormat),n=this.getTimeText(o,null,!1);return'<a class="'+u.join(" ")+'"'+(s.url?' href="'+htmlEscape(s.url)+'"':"")+(p?' style="'+p+'"':"")+'><div class="fc-content">'+(r?'<div class="fc-time" data-start="'+htmlEscape(n)+'" data-full="'+htmlEscape(i)+'"><span>'+htmlEscape(r)+"</span></div>":"")+(s.title?'<div class="fc-title">'+htmlEscape(s.title)+"</div>":"")+"</div>"+(h?'<div class="fc-resizer fc-end-resizer"></div>':"")+"</a>"},t.prototype.computeSegHorizontals=function(e){var t,r,i;if(computeForwardSlotSegs(t=buildSlotSegLevels(e)),r=t[0]){for(i=0;i<r.length;i++)computeSlotSegPressures(r[i]);for(i=0;i<r.length;i++)this.computeSegForwardBack(r[i],0,0)}},t.prototype.computeSegForwardBack=function(e,t,r){var i,n=e.forwardSegs;if(void 0===e.forwardCoord)for(n.length?(this.sortForwardSegs(n),this.computeSegForwardBack(n[0],t+1,r),e.forwardCoord=n[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-r)/(t+1),i=0;i<n.length;i++)this.computeSegForwardBack(n[i],0,e.forwardCoord)},t.prototype.sortForwardSegs=function(e){var t=e.map(buildTimeGridSegCompareObj),r=[{field:"forwardPressure",order:-1},{field:"backwardCoord",order:1}].concat(this.context.eventOrderSpecs);return t.sort((function(e,t){return compareByFieldSpecs(e,t,r)})),t.map((function(e){return e._seg}))},t.prototype.assignSegCss=function(e){for(var t=0,r=e;t<r.length;t++){var i=r[t];applyStyle(i.el,this.generateSegCss(i)),i.level>0&&i.el.classList.add("fc-time-grid-event-inset"),i.eventRange.def.title&&i.bottom-i.top<30&&i.el.classList.add("fc-short")}},t.prototype.generateSegCss=function(e){var t,r,i=this.context.options.slotEventOverlap,n=e.backwardCoord,o=e.forwardCoord,s=this.timeGrid.generateSegVerticalCss(e),l=this.context.isRtl;return i&&(o=Math.min(1,n+2*(o-n))),l?(t=1-o,r=n):(t=n,r=1-o),s.zIndex=e.level+1,s.left=100*t+"%",s.right=100*r+"%",i&&e.forwardPressure&&(s[l?"marginLeft":"marginRight"]=20),s},t}(FgEventRenderer);function buildSlotSegLevels(e){var t,r,i,n=[];for(t=0;t<e.length;t++){for(r=e[t],i=0;i<n.length&&computeSlotSegCollisions(r,n[i]).length;i++);r.level=i,(n[i]||(n[i]=[])).push(r)}return n}function computeForwardSlotSegs(e){var t,r,i,n,o;for(t=0;t<e.length;t++)for(r=e[t],i=0;i<r.length;i++)for((n=r[i]).forwardSegs=[],o=t+1;o<e.length;o++)computeSlotSegCollisions(n,e[o],n.forwardSegs)}function computeSlotSegPressures(e){var t,r,i=e.forwardSegs,n=0;if(void 0===e.forwardPressure){for(t=0;t<i.length;t++)computeSlotSegPressures(r=i[t]),n=Math.max(n,1+r.forwardPressure);e.forwardPressure=n}}function computeSlotSegCollisions(e,t,r){void 0===r&&(r=[]);for(var i=0;i<t.length;i++)isSlotSegCollision(e,t[i])&&r.push(t[i]);return r}function isSlotSegCollision(e,t){return e.bottom>t.top&&e.top<t.bottom}function buildTimeGridSegCompareObj(e){var t=buildSegCompareObj(e);return t.forwardPressure=e.forwardPressure,t.backwardCoord=e.backwardCoord,t}var TimeGridMirrorRenderer=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.attachSegs=function(e,t){this.segsByCol=this.timeGrid.groupSegsByCol(e),this.timeGrid.attachSegsByCol(this.segsByCol,this.timeGrid.mirrorContainerEls),this.sourceSeg=t.sourceSeg},t.prototype.generateSegCss=function(t){var r=e.prototype.generateSegCss.call(this,t),i=this.sourceSeg;if(i&&i.col===t.col){var n=e.prototype.generateSegCss.call(this,i);r.left=n.left,r.right=n.right,r.marginLeft=n.marginLeft,r.marginRight=n.marginRight}return r},t}(TimeGridEventRenderer),TimeGridFillRenderer=function(e){function t(t){var r=e.call(this)||this;return r.timeGrid=t,r}return __extends(t,e),t.prototype.attachSegs=function(e,t){var r,i=this.timeGrid;return"bgEvent"===e?r=i.bgContainerEls:"businessHours"===e?r=i.businessContainerEls:"highlight"===e&&(r=i.highlightContainerEls),i.attachSegsByCol(i.groupSegsByCol(t),r),t.map((function(e){return e.el}))},t.prototype.computeSegSizes=function(e){this.timeGrid.computeSegVerticals(e)},t.prototype.assignSegSizes=function(e){this.timeGrid.assignSegVerticals(e)},t}(FillRenderer),AGENDA_STOCK_SUB_DURATIONS=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}],TimeGrid=function(e){function t(t,r){var i=e.call(this,t)||this;i.isSlatSizesDirty=!1,i.isColSizesDirty=!1,i.processOptions=memoize(i._processOptions),i.renderSkeleton=memoizeRendering(i._renderSkeleton),i.renderSlats=memoizeRendering(i._renderSlats,null,[i.renderSkeleton]),i.renderColumns=memoizeRendering(i._renderColumns,i._unrenderColumns,[i.renderSkeleton]),i.renderProps=r;var n=i.renderColumns,o=i.eventRenderer=new TimeGridEventRenderer(i),s=i.fillRenderer=new TimeGridFillRenderer(i);return i.mirrorRenderer=new TimeGridMirrorRenderer(i),i.renderBusinessHours=memoizeRendering(s.renderSegs.bind(s,"businessHours"),s.unrender.bind(s,"businessHours"),[n]),i.renderDateSelection=memoizeRendering(i._renderDateSelection,i._unrenderDateSelection,[n]),i.renderFgEvents=memoizeRendering(o.renderSegs.bind(o),o.unrender.bind(o),[n]),i.renderBgEvents=memoizeRendering(s.renderSegs.bind(s,"bgEvent"),s.unrender.bind(s,"bgEvent"),[n]),i.renderEventSelection=memoizeRendering(o.selectByInstanceId.bind(o),o.unselectByInstanceId.bind(o),[i.renderFgEvents]),i.renderEventDrag=memoizeRendering(i._renderEventDrag,i._unrenderEventDrag,[n]),i.renderEventResize=memoizeRendering(i._renderEventResize,i._unrenderEventResize,[n]),i}return __extends(t,e),t.prototype._processOptions=function(e){var t,r,i=e.slotDuration,n=e.snapDuration;i=createDuration(i),n=n?createDuration(n):i,null===(t=wholeDivideDurations(i,n))&&(n=i,t=1),this.slotDuration=i,this.snapDuration=n,this.snapsPerSlot=t,r=e.slotLabelFormat,Array.isArray(r)&&(r=r[r.length-1]),this.labelFormat=createFormatter(r||{hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"}),r=e.slotLabelInterval,this.labelInterval=r?createDuration(r):this.computeLabelInterval(i)},t.prototype.computeLabelInterval=function(e){var t,r,i;for(t=AGENDA_STOCK_SUB_DURATIONS.length-1;t>=0;t--)if(r=createDuration(AGENDA_STOCK_SUB_DURATIONS[t]),null!==(i=wholeDivideDurations(r,e))&&i>1)return r;return e},t.prototype.render=function(e,t){this.processOptions(t.options);var r=e.cells;this.colCnt=r.length,this.renderSkeleton(t.theme),this.renderSlats(e.dateProfile),this.renderColumns(e.cells,e.dateProfile),this.renderBusinessHours(t,e.businessHourSegs),this.renderDateSelection(e.dateSelectionSegs),this.renderFgEvents(t,e.fgEventSegs),this.renderBgEvents(t,e.bgEventSegs),this.renderEventSelection(e.eventSelection),this.renderEventDrag(e.eventDrag),this.renderEventResize(e.eventResize)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.renderSlats.unrender(),this.renderColumns.unrender(),this.renderSkeleton.unrender()},t.prototype.updateSize=function(e){var t=this,r=t.fillRenderer,i=t.eventRenderer,n=t.mirrorRenderer;(e||this.isSlatSizesDirty)&&(this.buildSlatPositions(),this.isSlatSizesDirty=!1),(e||this.isColSizesDirty)&&(this.buildColPositions(),this.isColSizesDirty=!1),r.computeSizes(e),i.computeSizes(e),n.computeSizes(e),r.assignSizes(e),i.assignSizes(e),n.assignSizes(e)},t.prototype._renderSkeleton=function(e){var t=this.el;t.innerHTML='<div class="fc-bg"></div><div class="fc-slats"></div><hr class="fc-divider '+e.getClass("widgetHeader")+'" style="display:none" />',this.rootBgContainerEl=t.querySelector(".fc-bg"),this.slatContainerEl=t.querySelector(".fc-slats"),this.bottomRuleEl=t.querySelector(".fc-divider")},t.prototype._renderSlats=function(e){var t=this.context.theme;this.slatContainerEl.innerHTML='<table class="'+t.getClass("tableGrid")+'">'+this.renderSlatRowHtml(e)+"</table>",this.slatEls=findElements(this.slatContainerEl,"tr"),this.slatPositions=new PositionCache(this.el,this.slatEls,!1,!0),this.isSlatSizesDirty=!0},t.prototype.renderSlatRowHtml=function(e){for(var t,r,i,n=this.context,o=n.dateEnv,s=n.theme,l=n.isRtl,a="",d=startOfDay(e.renderRange.start),c=e.minTime,h=createDuration(0);asRoughMs(c)<asRoughMs(e.maxTime);)t=o.add(d,c),r=null!==wholeDivideDurations(h,this.labelInterval),i='<td class="fc-axis fc-time '+s.getClass("widgetContent")+'">'+(r?"<span>"+htmlEscape(o.format(t,this.labelFormat))+"</span>":"")+"</td>",a+='<tr data-time="'+formatIsoTimeString(t)+'"'+(r?"":' class="fc-minor"')+">"+(l?"":i)+'<td class="'+s.getClass("widgetContent")+'"></td>'+(l?i:"")+"</tr>",c=addDurations(c,this.slotDuration),h=addDurations(h,this.slotDuration);return a},t.prototype._renderColumns=function(e,t){var r=this.context,i=r.calendar,n=r.view,o=r.isRtl,s=r.theme,l=r.dateEnv,a=new DayBgRow(this.context);this.rootBgContainerEl.innerHTML='<table class="'+s.getClass("tableGrid")+'">'+a.renderHtml({cells:e,dateProfile:t,renderIntroHtml:this.renderProps.renderBgIntroHtml})+"</table>",this.colEls=findElements(this.el,".fc-day, .fc-disabled-day");for(var d=0;d<this.colCnt;d++)i.publiclyTrigger("dayRender",[{date:l.toDate(e[d].date),el:this.colEls[d],view:n}]);o&&this.colEls.reverse(),this.colPositions=new PositionCache(this.el,this.colEls,!0,!1),this.renderContentSkeleton(),this.isColSizesDirty=!0},t.prototype._unrenderColumns=function(){this.unrenderContentSkeleton()},t.prototype.renderContentSkeleton=function(){var e,t=this.context.isRtl,r=[];r.push(this.renderProps.renderIntroHtml());for(var i=0;i<this.colCnt;i++)r.push('<td><div class="fc-content-col"><div class="fc-event-container fc-mirror-container"></div><div class="fc-event-container"></div><div class="fc-highlight-container"></div><div class="fc-bgevent-container"></div><div class="fc-business-container"></div></div></td>');t&&r.reverse(),e=this.contentSkeletonEl=htmlToElement('<div class="fc-content-skeleton"><table><tr>'+r.join("")+"</tr></table></div>"),this.colContainerEls=findElements(e,".fc-content-col"),this.mirrorContainerEls=findElements(e,".fc-mirror-container"),this.fgContainerEls=findElements(e,".fc-event-container:not(.fc-mirror-container)"),this.bgContainerEls=findElements(e,".fc-bgevent-container"),this.highlightContainerEls=findElements(e,".fc-highlight-container"),this.businessContainerEls=findElements(e,".fc-business-container"),t&&(this.colContainerEls.reverse(),this.mirrorContainerEls.reverse(),this.fgContainerEls.reverse(),this.bgContainerEls.reverse(),this.highlightContainerEls.reverse(),this.businessContainerEls.reverse()),this.el.appendChild(e)},t.prototype.unrenderContentSkeleton=function(){removeElement(this.contentSkeletonEl)},t.prototype.groupSegsByCol=function(e){var t,r=[];for(t=0;t<this.colCnt;t++)r.push([]);for(t=0;t<e.length;t++)r[e[t].col].push(e[t]);return r},t.prototype.attachSegsByCol=function(e,t){var r,i,n;for(r=0;r<this.colCnt;r++)for(i=e[r],n=0;n<i.length;n++)t[r].appendChild(i[n].el)},t.prototype.getNowIndicatorUnit=function(){return"minute"},t.prototype.renderNowIndicator=function(e,t){if(this.colContainerEls){var r,i=this.computeDateTop(t),n=[];for(r=0;r<e.length;r++){var o=createElement("div",{className:"fc-now-indicator fc-now-indicator-line"});o.style.top=i+"px",this.colContainerEls[e[r].col].appendChild(o),n.push(o)}if(e.length>0){var s=createElement("div",{className:"fc-now-indicator fc-now-indicator-arrow"});s.style.top=i+"px",this.contentSkeletonEl.appendChild(s),n.push(s)}this.nowIndicatorEls=n}},t.prototype.unrenderNowIndicator=function(){this.nowIndicatorEls&&(this.nowIndicatorEls.forEach(removeElement),this.nowIndicatorEls=null)},t.prototype.getTotalSlatHeight=function(){return this.slatContainerEl.getBoundingClientRect().height},t.prototype.computeDateTop=function(e,t){return t||(t=startOfDay(e)),this.computeTimeTop(createDuration(e.valueOf()-t.valueOf()))},t.prototype.computeTimeTop=function(e){var t,r,i=this.slatEls.length,n=this.props.dateProfile,o=(e.milliseconds-asRoughMs(n.minTime))/asRoughMs(this.slotDuration);return o=Math.max(0,o),o=Math.min(i,o),t=Math.floor(o),r=o-(t=Math.min(t,i-1)),this.slatPositions.tops[t]+this.slatPositions.getHeight(t)*r},t.prototype.computeSegVerticals=function(e){var t,r,i,n=this.context.options.timeGridEventMinHeight;for(t=0;t<e.length;t++)r=e[t],i=this.props.cells[r.col].date,r.top=this.computeDateTop(r.start,i),r.bottom=Math.max(r.top+n,this.computeDateTop(r.end,i))},t.prototype.assignSegVerticals=function(e){var t,r;for(t=0;t<e.length;t++)r=e[t],applyStyle(r.el,this.generateSegVerticalCss(r))},t.prototype.generateSegVerticalCss=function(e){return{top:e.top,bottom:-e.bottom}},t.prototype.buildPositionCaches=function(){this.buildColPositions(),this.buildSlatPositions()},t.prototype.buildColPositions=function(){this.colPositions.build()},t.prototype.buildSlatPositions=function(){this.slatPositions.build()},t.prototype.positionToHit=function(e,t){var r=this.context.dateEnv,i=this,n=i.snapsPerSlot,o=i.slatPositions,s=i.colPositions,l=s.leftToIndex(e),a=o.topToIndex(t);if(null!=l&&null!=a){var d=o.tops[a],c=o.getHeight(a),h=(t-d)/c,u=a*n+Math.floor(h*n),p=this.props.cells[l].date,m=addDurations(this.props.dateProfile.minTime,multiplyDuration(this.snapDuration,u)),g=r.add(p,m);return{col:l,dateSpan:{range:{start:g,end:r.add(g,this.snapDuration)},allDay:!1},dayEl:this.colEls[l],relativeRect:{left:s.lefts[l],right:s.rights[l],top:d,bottom:d+c}}}},t.prototype._renderEventDrag=function(e){e&&(this.eventRenderer.hideByHash(e.affectedInstances),e.isEvent?this.mirrorRenderer.renderSegs(this.context,e.segs,{isDragging:!0,sourceSeg:e.sourceSeg}):this.fillRenderer.renderSegs("highlight",this.context,e.segs))},t.prototype._unrenderEventDrag=function(e){e&&(this.eventRenderer.showByHash(e.affectedInstances),e.isEvent?this.mirrorRenderer.unrender(this.context,e.segs,{isDragging:!0,sourceSeg:e.sourceSeg}):this.fillRenderer.unrender("highlight",this.context))},t.prototype._renderEventResize=function(e){e&&(this.eventRenderer.hideByHash(e.affectedInstances),this.mirrorRenderer.renderSegs(this.context,e.segs,{isResizing:!0,sourceSeg:e.sourceSeg}))},t.prototype._unrenderEventResize=function(e){e&&(this.eventRenderer.showByHash(e.affectedInstances),this.mirrorRenderer.unrender(this.context,e.segs,{isResizing:!0,sourceSeg:e.sourceSeg}))},t.prototype._renderDateSelection=function(e){e&&(this.context.options.selectMirror?this.mirrorRenderer.renderSegs(this.context,e,{isSelecting:!0}):this.fillRenderer.renderSegs("highlight",this.context,e))},t.prototype._unrenderDateSelection=function(e){e&&(this.context.options.selectMirror?this.mirrorRenderer.unrender(this.context,e,{isSelecting:!0}):this.fillRenderer.unrender("highlight",this.context))},t}(DateComponent),AllDaySplitter=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getKeyInfo=function(){return{allDay:{},timed:{}}},t.prototype.getKeysForDateSpan=function(e){return e.allDay?["allDay"]:["timed"]},t.prototype.getKeysForEventDef=function(e){return e.allDay?hasBgRendering(e)?["timed","allDay"]:["allDay"]:["timed"]},t}(Splitter),TIMEGRID_ALL_DAY_EVENT_LIMIT=5,WEEK_HEADER_FORMAT=createFormatter({week:"short"}),AbstractTimeGridView=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.splitter=new AllDaySplitter,t.renderSkeleton=memoizeRendering(t._renderSkeleton,t._unrenderSkeleton),t.renderHeadIntroHtml=function(){var e,r=t.context,i=r.theme,n=r.dateEnv,o=r.options,s=t.props.dateProfile.renderRange,l=diffDays(s.start,s.end);return o.weekNumbers?(e=n.format(s.start,WEEK_HEADER_FORMAT),'<th class="fc-axis fc-week-number '+i.getClass("widgetHeader")+'" '+t.axisStyleAttr()+">"+buildGotoAnchorHtml(o,n,{date:s.start,type:"week",forceOff:l>1},htmlEscape(e))+"</th>"):'<th class="fc-axis '+i.getClass("widgetHeader")+'" '+t.axisStyleAttr()+"></th>"},t.renderTimeGridBgIntroHtml=function(){return'<td class="fc-axis '+t.context.theme.getClass("widgetContent")+'" '+t.axisStyleAttr()+"></td>"},t.renderTimeGridIntroHtml=function(){return'<td class="fc-axis" '+t.axisStyleAttr()+"></td>"},t.renderDayGridBgIntroHtml=function(){var e=t.context,r=e.theme,i=e.options;return'<td class="fc-axis '+r.getClass("widgetContent")+'" '+t.axisStyleAttr()+"><span>"+getAllDayHtml(i)+"</span></td>"},t.renderDayGridIntroHtml=function(){return'<td class="fc-axis" '+t.axisStyleAttr()+"></td>"},t}return __extends(t,e),t.prototype.render=function(t,r){e.prototype.render.call(this,t,r),this.renderSkeleton(r)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.renderSkeleton.unrender()},t.prototype._renderSkeleton=function(e){this.el.classList.add("fc-timeGrid-view"),this.el.innerHTML=this.renderSkeletonHtml(),this.scroller=new ScrollComponent("hidden","auto");var t=this.scroller.el;this.el.querySelector(".fc-body > tr > td").appendChild(t),t.classList.add("fc-time-grid-container");var r=createElement("div",{className:"fc-time-grid"});if(t.appendChild(r),this.timeGrid=new TimeGrid(r,{renderBgIntroHtml:this.renderTimeGridBgIntroHtml,renderIntroHtml:this.renderTimeGridIntroHtml}),e.options.allDaySlot){this.dayGrid=new DayGrid(this.el.querySelector(".fc-day-grid"),{renderNumberIntroHtml:this.renderDayGridIntroHtml,renderBgIntroHtml:this.renderDayGridBgIntroHtml,renderIntroHtml:this.renderDayGridIntroHtml,colWeekNumbersVisible:!1,cellWeekNumbersVisible:!1});var i=this.el.querySelector(".fc-divider");this.dayGrid.bottomCoordPadding=i.getBoundingClientRect().height}},t.prototype._unrenderSkeleton=function(){this.el.classList.remove("fc-timeGrid-view"),this.timeGrid.destroy(),this.dayGrid&&this.dayGrid.destroy(),this.scroller.destroy()},t.prototype.renderSkeletonHtml=function(){var e=this.context,t=e.theme,r=e.options;return'<table class="'+t.getClass("tableGrid")+'">'+(r.columnHeader?'<thead class="fc-head"><tr><td class="fc-head-container '+t.getClass("widgetHeader")+'">&nbsp;</td></tr></thead>':"")+'<tbody class="fc-body"><tr><td class="'+t.getClass("widgetContent")+'">'+(r.allDaySlot?'<div class="fc-day-grid"></div><hr class="fc-divider '+t.getClass("widgetHeader")+'" />':"")+"</td></tr></tbody></table>"},t.prototype.getNowIndicatorUnit=function(){return this.timeGrid.getNowIndicatorUnit()},t.prototype.unrenderNowIndicator=function(){this.timeGrid.unrenderNowIndicator()},t.prototype.updateSize=function(t,r,i){e.prototype.updateSize.call(this,t,r,i),this.timeGrid.updateSize(t),this.dayGrid&&this.dayGrid.updateSize(t)},t.prototype.updateBaseSize=function(e,t,r){var i,n,o,s=this;if(this.axisWidth=matchCellWidths(findElements(this.el,".fc-axis")),this.timeGrid.colEls){var l=findElements(this.el,".fc-row").filter((function(e){return!s.scroller.el.contains(e)}));this.timeGrid.bottomRuleEl.style.display="none",this.scroller.clear(),l.forEach(uncompensateScroll),this.dayGrid&&(this.dayGrid.removeSegPopover(),(i=this.context.options.eventLimit)&&"number"!=typeof i&&(i=TIMEGRID_ALL_DAY_EVENT_LIMIT),i&&this.dayGrid.limitRows(i)),r||(n=this.computeScrollerHeight(t),this.scroller.setHeight(n),((o=this.scroller.getScrollbarWidths()).left||o.right)&&(l.forEach((function(e){compensateScroll(e,o)})),n=this.computeScrollerHeight(t),this.scroller.setHeight(n)),this.scroller.lockOverflow(o),this.timeGrid.getTotalSlatHeight()<n&&(this.timeGrid.bottomRuleEl.style.display=""))}else r||(n=this.computeScrollerHeight(t),this.scroller.setHeight(n))},t.prototype.computeScrollerHeight=function(e){return e-subtractInnerElHeight(this.el,this.scroller.el)},t.prototype.computeDateScroll=function(e){var t=this.timeGrid.computeTimeTop(e);return(t=Math.ceil(t))&&t++,{top:t}},t.prototype.queryDateScroll=function(){return{top:this.scroller.getScrollTop()}},t.prototype.applyDateScroll=function(e){void 0!==e.top&&this.scroller.setScrollTop(e.top)},t.prototype.axisStyleAttr=function(){return null!=this.axisWidth?'style="width:'+this.axisWidth+'px"':""},t}(View);AbstractTimeGridView.prototype.usesMinMaxTime=!0;var SimpleTimeGrid=function(e){function t(t){var r=e.call(this,t.el)||this;return r.buildDayRanges=memoize(buildDayRanges),r.slicer=new TimeGridSlicer,r.timeGrid=t,r}return __extends(t,e),t.prototype.firstContext=function(e){e.calendar.registerInteractiveComponent(this,{el:this.timeGrid.el})},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.context.calendar.unregisterInteractiveComponent(this)},t.prototype.render=function(e,t){var r=this.context.dateEnv,i=e.dateProfile,n=e.dayTable,o=this.dayRanges=this.buildDayRanges(n,i,r),s=this.timeGrid;s.receiveContext(t),s.receiveProps(__assign({},this.slicer.sliceProps(e,i,null,t.calendar,s,o),{dateProfile:i,cells:n.cells[0]}),t)},t.prototype.renderNowIndicator=function(e){this.timeGrid.renderNowIndicator(this.slicer.sliceNowDate(e,this.timeGrid,this.dayRanges),e)},t.prototype.buildPositionCaches=function(){this.timeGrid.buildPositionCaches()},t.prototype.queryHit=function(e,t){var r=this.timeGrid.positionToHit(e,t);if(r)return{component:this.timeGrid,dateSpan:r.dateSpan,dayEl:r.dayEl,rect:{left:r.relativeRect.left,right:r.relativeRect.right,top:r.relativeRect.top,bottom:r.relativeRect.bottom},layer:0}},t}(DateComponent);function buildDayRanges(e,t,r){for(var i=[],n=0,o=e.headerDates;n<o.length;n++){var s=o[n];i.push({start:r.add(s,t.minTime),end:r.add(s,t.maxTime)})}return i}var TimeGridSlicer=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.sliceRange=function(e,t){for(var r=[],i=0;i<t.length;i++){var n=intersectRanges(e,t[i]);n&&r.push({start:n.start,end:n.end,isStart:n.start.valueOf()===e.start.valueOf(),isEnd:n.end.valueOf()===e.end.valueOf(),col:i})}return r},t}(Slicer),TimeGridView=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buildDayTable=memoize(buildDayTable),t}return __extends(t,e),t.prototype.render=function(t,r){e.prototype.render.call(this,t,r);var i=this.props,n=i.dateProfile,o=i.dateProfileGenerator,s=r.nextDayThreshold,l=this.buildDayTable(n,o),a=this.splitter.splitProps(t);this.header&&this.header.receiveProps({dateProfile:n,dates:l.headerDates,datesRepDistinctDays:!0,renderIntroHtml:this.renderHeadIntroHtml},r),this.simpleTimeGrid.receiveProps(__assign({},a.timed,{dateProfile:n,dayTable:l}),r),this.simpleDayGrid&&this.simpleDayGrid.receiveProps(__assign({},a.allDay,{dateProfile:n,dayTable:l,nextDayThreshold:s,isRigid:!1}),r),this.startNowIndicator(n,o)},t.prototype._renderSkeleton=function(t){e.prototype._renderSkeleton.call(this,t),t.options.columnHeader&&(this.header=new DayHeader(this.el.querySelector(".fc-head-container"))),this.simpleTimeGrid=new SimpleTimeGrid(this.timeGrid),this.dayGrid&&(this.simpleDayGrid=new SimpleDayGrid(this.dayGrid))},t.prototype._unrenderSkeleton=function(){e.prototype._unrenderSkeleton.call(this),this.header&&this.header.destroy(),this.simpleTimeGrid.destroy(),this.simpleDayGrid&&this.simpleDayGrid.destroy()},t.prototype.renderNowIndicator=function(e){this.simpleTimeGrid.renderNowIndicator(e)},t}(AbstractTimeGridView);function buildDayTable(e,t){var r=new DaySeries(e.renderRange,t);return new DayTable(r,!1)}var main=createPlugin({defaultView:"timeGridWeek",views:{timeGrid:{class:TimeGridView,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});export default main;export{AbstractTimeGridView,TimeGrid,TimeGridSlicer,TimeGridView,buildDayRanges,buildDayTable};